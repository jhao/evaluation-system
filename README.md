# 小组评价系统

一个完整的小组评价系统，支持大屏展示、手机端评价、后台管理和实时排名功能。

## 功能特性

### 🎯 核心功能
- **大屏展示**: 实时显示小组信息、成员列表、投票统计和照片轮播
- **手机端评价**: 扫码进入，身份验证后进行投票
- **后台管理**: 管理小组、成员、评价人和职务信息
- **实时排名**: 奥运领奖台式排名展示
- **实时通信**: WebSocket实现投票数据实时更新

### 🎨 界面特色
- 深蓝色主题配色，专业美观
- 响应式设计，支持桌面和移动设备
- 流畅的动画效果和交互体验
- 二维码扫码评价，操作简便

### 🔧 技术栈
- **后端**: Python Flask + SQLite + WebSocket
- **前端**: HTML5 + CSS3 + JavaScript + Socket.IO
- **数据库**: SQLite (轻量级，无需额外安装)

## 快速开始

### 系统要求
- macOS 或 Linux 系统
- Python 3.7+
- 现代浏览器 (Chrome, Safari, Firefox)

### 安装和启动

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd evaluation_system
   ```

2. **一键启动**
   ```bash
   ./start.sh
   ```

3. **访问系统**
   - 打开浏览器访问: http://localhost:5000
   - 大屏展示: http://localhost:5000
   - 后台管理: 点击页面顶部"后台管理"按钮

### 初始化数据

首次使用时，建议先初始化示例数据：

1. 访问系统后，点击"后台管理"
2. 切换到"初始化数据"标签
3. 点击"初始化示例数据"按钮

这将创建：
- 6个示例小组
- 5个默认职务（组长、副组长、组员、技术负责人、产品经理）
- 5个示例评价人（包含老师和同学，权重不同）

## 使用指南

### 1. 后台管理

#### 小组管理
- 添加/编辑/删除小组
- 设置小组名称和Logo
- 上传小组风采照片
- 管理小组成员和职务
- 锁定/解锁小组评价状态

#### 评价人管理
- 添加可参与评价的人员
- 设置姓名、手机号和投票权重
- 老师权重建议设为10，同学设为1

#### 职务管理
- 管理小组成员可选择的职务
- 支持自定义职务名称

### 2. 大屏展示

- **小组切换**: 顶部按钮可切换不同小组
- **成员信息**: 左侧显示当前小组成员列表
- **投票统计**: 中间实时显示赞和踩的数量
- **二维码**: 扫码进入手机端评价页面
- **照片轮播**: 右侧展示小组风采照片

### 3. 手机端评价

1. **扫码进入**: 用手机扫描大屏上的二维码
2. **身份验证**: 输入姓名和手机号进行验证
3. **投票评价**: 选择"赞一票"或"踩一脚"
4. **实时更新**: 投票后大屏幕立即显示最新统计

### 4. 排名查看

- 点击"查看排名"查看所有小组的最终排名
- 采用奥运领奖台布局，第一名居中最高
- 前三名显示金银铜皇冠标识

## 系统架构

```
evaluation_system/
├── backend/                 # 后端应用
│   ├── src/
│   │   ├── models/         # 数据库模型
│   │   │   └── evaluation.py
│   │   ├── routes/         # API路由
│   │   │   └── evaluation.py
│   │   ├── static/         # 前端静态文件
│   │   │   ├── index.html
│   │   │   ├── styles.css
│   │   │   ├── app.js
│   │   │   └── uploads/    # 文件上传目录
│   │   ├── database/       # 数据库文件
│   │   └── main.py         # 应用入口
│   ├── venv/              # Python虚拟环境
│   └── requirements.txt   # 依赖包列表
├── start.sh               # 启动脚本
└── README.md             # 项目文档
```

## 数据库设计

### 主要数据表
- **groups**: 小组信息表
- **members**: 小组成员表
- **roles**: 职务表
- **voters**: 评价人表
- **votes**: 投票记录表

### 关键特性
- 支持评价人权重设置
- 防止重复投票
- 小组评价状态锁定
- 实时投票统计

## API接口

### 小组管理
- `GET /api/groups` - 获取所有小组
- `POST /api/groups` - 创建小组
- `PUT /api/groups/<id>` - 更新小组
- `DELETE /api/groups/<id>` - 删除小组
- `POST /api/groups/<id>/lock` - 锁定/解锁小组

### 投票相关
- `POST /api/verify-voter` - 验证评价人身份
- `POST /api/vote` - 提交投票
- `GET /api/groups/<id>/stats` - 获取小组投票统计
- `GET /api/ranking` - 获取排名

### 其他接口
- 成员管理、职务管理、评价人管理等

## 部署说明

### 开发环境
项目已配置为开发模式，支持热重载和调试。

### 生产环境
如需部署到生产环境，建议：
1. 修改Flask配置，关闭调试模式
2. 使用Gunicorn等WSGI服务器
3. 配置Nginx反向代理
4. 使用PostgreSQL或MySQL替代SQLite

## 故障排除

### 常见问题

1. **启动失败**
   - 检查Python版本是否为3.7+
   - 确保虚拟环境正确激活
   - 检查端口5000是否被占用

2. **二维码无法扫描**
   - 确保手机和电脑在同一网络
   - 检查防火墙设置
   - 尝试使用IP地址访问

3. **投票不成功**
   - 检查评价人信息是否正确录入
   - 确认小组状态未被锁定
   - 检查是否已经投过票

4. **照片无法显示**
   - 检查图片文件路径是否正确
   - 确认uploads目录权限
   - 支持的图片格式：PNG, JPG, JPEG, GIF

## 技术支持

如遇到问题，请检查：
1. 浏览器控制台错误信息
2. 服务器终端日志输出
3. 网络连接状态

## 许可证

本项目仅供学习和培训使用。

## 更新日志

### v1.0.0 (2024-12-22)
- 初始版本发布
- 完整的评价系统功能
- 支持大屏展示和手机端评价
- 实时WebSocket通信
- 后台管理功能

