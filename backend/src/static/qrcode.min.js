/*! qrcode.js v1.0.0 | (c) 2017 davidshimjs | MIT */
var QRCode;!function(){function t(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function e(t,e){if(null==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&t[n]==e;)n++;return t.length==n}function n(t,e){this.mode=i.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var n=0,r=this.data.length;n<r;n++){var o=this.data.charCodeAt(n);o>65535?(this.parsedData.push(240|o>>18&7),this.parsedData.push(128|o>>12&63),this.parsedData.push(128|o>>6&63),this.parsedData.push(128|63&o)):o>2047?(this.parsedData.push(224|o>>12&15),this.parsedData.push(128|o>>6&63),this.parsedData.push(128|63&o)):o>127?(this.parsedData.push(192|o>>6&31),this.parsedData.push(128|63&o)):this.parsedData.push(o)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function r(t,e){this.totalCount=t,this.dataCount=e}function o(){this.buffer=[],this.length=0}function u(){var t=[];return function(){if(0==t.length)for(var e=0;e<256;e++){var n=e;for(var r=0;r<8;r++)n=1&(n>>7)?n<<1^285:n<<1;n&=255,t[e]=n}return t}}function f(){var t=[];return function(){if(0==t.length){for(var e=0;e<256;e++){var n=0;for(var r=e;r>0;)n^=r&1?285<<Math.floor(Math.log(r)/Math.log(2)):0,r>>=1;t[e]=n^1}t[0]=0}return t}}function a(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);for(var n=0;n<t.length&&0==t[n];)n++;return t.length-n}function c(t,e){this.num=t,this.antiNum=e,this.init()}function l(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);var n=a(t,e),r=new Array(t.length-n+e);return t=0!==n?t.slice(n):t,e=0!==n?new Array(e).fill(0).concat(t):t,r}function h(t,e){this.num=t,this.antiNum=e,this.init()}function s(t){this.buffer=[],this.length=0,this.put=function(t,e){for(var n=0;n<e;n++)this.putBit((t>>e-n-1&1)==1)},this.putBit=function(t){var e=this.length>>3;this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>this.length%8),this.length++}}var i={};t.prototype={addData:function(t){var e=new n(t);this.dataList.push(e),this.dataCache=null},isDark:function(t,e){if(null==this.modules)throw new Error("no modules");if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1)this.typeNumber=this.getMinimumTypeNumber();this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(n,r){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var u=0;u<this.moduleCount;u++)this.modules[o][u]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(n,r),this.typeNumber>=7&&this.setupTypeNumber(n),null==this.dataCache&&(this.dataCache=t.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,r)},setupPositionProbePattern:function(t,e){for(var n=-1;n<=7;n++)if(!(t+n<=-1||this.moduleCount<=t+n))for(var r=-1;r<=7;r++)e+r<=-1||this.moduleCount<=e+r||(n>=0&&n<=6&&(0==r||6==r)||r>=0&&r<=6&&(0==n||6==n)||n>=2&&n<=4&&r>=2&&r<=4?this.modules[t+n][e+r]=!0:this.modules[t+n][e+r]=!1)},getBestMaskPattern:function(){for(var t=0,e=0,n=0;n<8;n++){this.makeImpl(!0,n);var r=i.getLostPoint(this);(0==n||t>r)&&(t=r,e=n)}return e},createMovieClip:function(t,e,n){var r=t.createEmptyMovieClip(e,n),o=1;this.make();for(var u=0;u<this.modules.length;u++)for(var f=1*u;f<this.modules[u].length;f++)this.modules[u][f]&&r.beginFill(0,100),r.moveTo(f*o,u*o),r.lineTo((f+1)*o,u*o),r.lineTo((f+1)*o,(u+1)*o),r.lineTo(f*o,(u+1)*o),r.lineTo(f*o,u*o),r.endFill();return r},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var t=i.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var n=0;n<t.length;n++){var r=t[e],o=t[n];if(null==this.modules[r][o])for(var u=-2;u<=2;u++)for(var f=-2;f<=2;f++)this.modules[r+u][o+f]=u>=-1&&u<=1&&f>=-1&&f<=1||0==u&&0==f}},setupTypeNumber:function(t){for(var e=i.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var r=!t&&1==(e>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=r,this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=r}},setupTypeInfo:function(t,e){for(var n=this.errorCorrectLevel<<3|e,r=i.getBCHTypeInfo(n),o=0;o<15;o++){var u=!t&&1==(r>>o&1);o<6?this.modules[o][8]=u:o<8?this.modules[o+1][8]=u:this.modules[this.moduleCount-15+o][8]=u}for(o=0;o<15;o++){u=!t&&1==(r>>o&1);o<8?this.modules[8][this.moduleCount-1-o]=u:o<9?this.modules[8][15-o-1+1]=u:this.modules[8][15-o-1]=u}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var n=-1,r=this.moduleCount-1,o=7,u=0,f=this.moduleCount-1;f>0;f-=2)for(6==f&&f--;;){for(var a=0;a<2;a++)if(null==this.modules[r][f-a]){var c=!1;u<t.length&&(c=1==(t[u]>>>o&1));var l=i.getMask(e,r,f-a);l&&(c=!c),this.modules[r][f-a]=c,o--,-1==o&&(u++,o=7)}if((r+=n)<0||this.moduleCount<=r){r-=n,n=-n;break}}},getMinimumTypeNumber:function(){for(var t=1;t<=40;t++){for(var e=i.getRSBlocks(t,this.errorCorrectLevel),n=new o,r=0;r<e.length;r++)n.put(e[r].dataCount<<3,e[r].dataCount);if(n.length<=8*t+16)return t}return 40}},t.PAD0=236,t.PAD1=17,t.createData=function(e,n,r){for(var o=i.getRSBlocks(e,n),u=new o,f=0;f<r.length;f++){var a=r[f];u.put(a.mode,4),u.put(a.getLength(),a.getLengthInBits()),a.write(u)}for(f=0;f<o.length;f++){var c=o[f].dataCount;if(c){var l=new o;l.put(t.PAD0<<1|t.PAD1,8)}u.put(0,Math.min(u.length,c*8-u.length))}return t.createBytes(u,o)},t.createBytes=function(t,e){for(var n=0,r=0,o=new Array(e.length),u=0;u<e.length;u++)o[u]=new Array(e[u].dataCount);for(u=0;u<e.length;u++)for(var f=e[u],a=0;a<f.dataCount;a++)o[u][a]=255&t.buffer[a+r];for(u=0;u<e.length;u++)for(var c=e[u].totalCount,e=e[u].dataCount,l=c-e,h=i.getPolynomial(l),s=0;s<e;s++)o[u][s]=i.getBCHDigit(o[u][s],h);return o},n.prototype={getLength:function(){return this.parsedData.length},getLengthInBits:function(){return this.parsedData.length<1<<8?8:this.parsedData.length<1<<16?16:16},write:function(t){for(var e=0;e<this.parsedData.length;e++)t.put(this.parsedData[e],8)}},r.getRSBlocks=function(t,e){var n=r.getRsBlockTable(e,t);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var o=n.length/3,u=[],f=0;f<o;f++)for(var a=n[3*f+0],c=n[3*f+1],l=n[3*f+2],h=0;h<a;h++)u.push(new r(c,l));return u},r.getRsBlockTable=function(t,e){switch(e){case i.L:return[1,26,19];case i.M:return[1,26,16];case i.Q:return[1,26,13];case i.H:return[1,26,9];default:return void 0}},o.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},i.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],i.G15=1335,i.G18=7973,i.G15_MASK=21522,i.getBCHDigit=function(t){var e=0;for(;0!=t;)e++,t>>>=1;return e},i.getBCHTypeInfo=function(t){var e=t<<10;for(;i.getBCHDigit(e)-i.getBCHDigit(i.G15)>=0;)e^=i.G15<<(i.getBCHDigit(e)-i.getBCHDigit(i.G15));return t<<10|e},i.getBCHTypeNumber=function(t){var e=t<<12;for(;i.getBCHDigit(e)-i.getBCHDigit(i.G18)>=0;)e^=i.G18<<(i.getBCHDigit(e)-i.getBCHDigit(i.G18));return t<<12|e},i.getPatternPosition=function(t){return i.PATTERN_POSITION_TABLE[t-1]},i.getMask=function(t,e,n){switch(t){case 0:return(e+n)%2==0;case 1:return e%2==0;case 2:return n%3==0;case 3:return(e+n)%3==0;case 4:return(Math.floor(e/2)+Math.floor(n/3))%2==0;case 5:return e*n%2+e*n%3==0;case 6:return(e*n%2+e*n%3)%2==0;case 7:return(e*n%3+Math.floor((e+n)/2))%2==0;default:throw new Error("bad maskPattern:"+t)}},i.getErrorCorrectPolynomial=function(t){for(var e=new c([1],0),n=0;n<t;n++)e=e.multiply(new c([1,u()[n]],0));return e},i.getLostPoint=function(t){for(var e=t.getModuleCount(),n=0,r=0;r<e;r++)for(var o=0;o<e;o++){for(var u=0,f=t.isDark(r,o),a=-1;a<=1;a++)if(!(r+a<0||e<=r+a))for(var c=-1;c<=1;c++)o+c<0||e<=o+c||0==a&&0==c||(f==t.isDark(r+a,o+c)&&u++);u>5&&(n+=3+u-5)}for(r=0;r<e-1;r++)for(o=0;o<e-1;o++){var l=0;t.isDark(r,o)&&l++,t.isDark(r+1,o)&&l++,t.isDark(r,o+1)&&l++,t.isDark(r+1,o+1)&&l++,l&&(0==l||4==l)&&(n+=3)}for(r=0;r<e;r++)for(o=0;o<e-6;o++)t.isDark(r,o)&&!t.isDark(r,o+1)&&t.isDark(r,o+2)&&t.isDark(r,o+3)&&t.isDark(r,o+4)&&!t.isDark(r,o+5)&&t.isDark(r,o+6)&&(n+=40);for(o=0;o<e;o++)for(r=0;r<e-6;r++)t.isDark(r,o)&&!t.isDark(r+1,o)&&t.isDark(r+2,o)&&t.isDark(r+3,o)&&t.isDark(r+4,o)&&!t.isDark(r+5,o)&&t.isDark(r+6,o)&&(n+=40);for(var h=0,s=0;r<e;r++)for(o=0;o<e;o++)t.isDark(r,o)&&h++;return s=e*e,n+=Math.abs(100*h/s-50)/5*10},i.getRSBlocks=function(t,e){return r.getRSBlocks(t,e)},i.getMaskPattern=function(t){return i.getMask(t)},c.prototype={init:function(){this.num=this.num||[],this.antiNum=this.antiNum||[],this.num.length<this.antiNum.length&&(this.num=new Array(this.antiNum.length-this.num.length).fill(0).concat(this.num))},get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1).fill(0),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=u()[this.num[n]+t.num[r]];return new c(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=u()[this.num[0]-t.num[0]],n=new Array(this.getLength()).fill(0),r=0;r<this.getLength();r++)n[r]=this.num[r],r<t.getLength()&&(n[r]^=u()[t.num[r]+e]);return new c(n,0).mod(t)},toString:function(){return this.num.join(",")}},l.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1).fill(0),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=f()[this.num[n]+t.num[r]];return new l(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=f()[this.num[0]-t.num[0]],n=new Array(this.getLength()).fill(0),r=0;r<this.getLength();r++)n[r]=this.num[r],r<t.getLength()&&(n[r]^=f()[t.num[r]+e]);return new l(n,0).mod(t)},toString:function(){return this.num.join(",")}},h.prototype={init:function(){this.num=this.num||[],this.antiNum=this.antiNum||[],this.num.length<this.antiNum.length&&(this.num=new Array(this.antiNum.length-this.num.length).fill(0).concat(this.num))},get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1).fill(0),n=0;n<this.getLength();n++)for(var r=0;r<t.getLength();r++)e[n+r]^=u()[this.num[n]+t.num[r]];return new h(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=u()[this.num[0]-t.num[0]],n=new Array(this.getLength()).fill(0),r=0;r<this.getLength();r++)n[r]=this.num[r],r<t.getLength()&&(n[r]^=u()[t.num[r]+e]);return new h(n,0).mod(t)},toString:function(){return this.num.join(",")}},s.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var n=0;n<e;n++)this.putBit(1==(t>>>e-n-1&1))},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}},i.stringToBytes=function(t){var e=[];if(e.length==t.length)return e;for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);r>255&&e.push(r>>>8),e.push(255&r)}return e},QRCode=function(element, options){
    if(!(this instanceof QRCode)){
        return new QRCode(element, options);
    }

    var opts = options || {};
    var el = resolveElement(element);

    if(!el && element && typeof element === "object" && !element.nodeType){
        opts = element;
        el = resolveElement(element.el || options);
    }

    if(!el){
        throw new Error("Element not found");
    }

    this._el = el;
    this._elTitle = this._el.getAttribute("title") || "";

    this._htOption = {
        text: "",
        width: 256,
        height: 256,
        typeNumber: 0,
        colorDark: "#000000",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel.H
    };

    if(opts && typeof opts === "object"){
        if(typeof opts.text === "string"){
            this._htOption.text = opts.text;
        }
        if(opts.width != null){
            this._htOption.width = Number(opts.width) || this._htOption.width;
        }
        if(opts.height != null){
            this._htOption.height = Number(opts.height) || this._htOption.height;
        }
        if(opts.typeNumber != null){
            this._htOption.typeNumber = opts.typeNumber;
        }
        if(typeof opts.colorDark === "string"){
            this._htOption.colorDark = opts.colorDark;
        }
        if(typeof opts.colorLight === "string"){
            this._htOption.colorLight = opts.colorLight;
        }
        if(opts.correctLevel != null){
            this._htOption.correctLevel = opts.correctLevel;
        }
    }

    this._oQRCode = null;
    this._bIsPainted = false;
    this.clear();

    if(this._htOption.text){
        this.makeCode(this._htOption.text);
    }
};

function resolveElement(element){
    if(typeof element === "string"){
        return document.getElementById(element);
    }
    if(element && element.nodeType === 1){
        return element;
    }
    return null;
}

QRCode.prototype._createQRCode = function(text){
    var typeNumber = this._htOption.typeNumber || 0;
    var correctLevel = this._htOption.correctLevel || QRCode.CorrectLevel.H;
    var qr = new t(typeNumber, correctLevel);
    qr.addData(text);
    qr.make();
    return qr;
};

QRCode.prototype.makeCode = function(text){
    if(!text){
        this.clear();
        return;
    }

    this._htOption.text = text;
    this._oQRCode = this._createQRCode(text);
    this._render();
};

QRCode.prototype._render = function(){
    if(!this._el || !this._oQRCode){
        return;
    }

    var moduleCount = this._oQRCode.getModuleCount();
    var cellWidth = this._htOption.width / moduleCount;
    var cellHeight = this._htOption.height / moduleCount;
    var colorDark = this._htOption.colorDark;
    var colorLight = this._htOption.colorLight;
    var html = "";

    for(var row = 0; row < moduleCount; row++){
        html += "<div style='clear:both'>";
        for(var col = 0; col < moduleCount; col++){
            html += "<div style='float:left;width:" +
                cellWidth +
                "px;height:" +
                cellHeight +
                "px;background-color:" +
                (this._oQRCode.isDark(row, col) ? colorDark : colorLight) +
                "'></div>";
        }
        html += "</div>";
    }

    this._el.innerHTML = html;
    this._bIsPainted = true;
};

QRCode.prototype.clear = function(){
    this._oQRCode = null;
    this._bIsPainted = false;
    if(this._el){
        this._el.innerHTML = "";
        if(this._elTitle){
            this._el.setAttribute("title", this._elTitle);
        }
    }
};

QRCode.prototype.makeImage = function(){
    this._render();
};

QRCode.CorrectLevel=i}();